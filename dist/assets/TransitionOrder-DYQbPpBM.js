import{s as d,f as m,T as x,j as e,P as f,v as u}from"./index-BZiLoYku.js";import{A as p}from"./AppLayout-DYW4N5im.js";async function j(s){const{data:r,error:n}=await d.from("orders").select("*").eq("transaction_id",s);if(n)throw new Error(n.message);return r}function h(s){const{data:r,error:n,isFetched:a}=m({queryFn:()=>j(s),queryKey:[x,s],enabled:!!s});return{data:r,error:n,isFetched:a}}function y({transitionId:s}){return e.jsxs("div",{className:"flex flex-row flex-wrap gap-y-1 justify-center gap-x-6",children:[e.jsxs("h2",{className:"text-2xl font-bold",children:[e.jsx("span",{children:s})," وضیعت شماره"]}),e.jsx("span",{className:"bg-green-400  p-1 text-white font-bold rounded-full",children:"سفارش داده شده"})]})}function b({data:s}){return e.jsxs("div",{className:"flex py-1.5 mx-5 justify-between border-y border-gray-300",children:[e.jsxs("span",{className:"font-bold",children:[s.number*s.price,"$"]}),e.jsxs("span",{className:"text-gray-600",children:[s.number," ✖ ",s.pizza_name," "]})]})}function g({isFetched:s,data:r}){if(!r||r.length===0)return;const n=new Date(r[0].created_at).getTime(),a=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(n),c=new Date-n,l=Math.floor(c/(1e3*60)),o=r[0].details.obj.reduce((t,i)=>t+i.price*i.number,0);return s?e.jsxs("div",{className:"flex flex-col gap-y-6",children:[e.jsxs("div",{className:"bg-gray-200 p-3  mx-3",children:[e.jsxs("p",{className:"font-bold text-center",children:["از زمان ثبت سفارش شما ",l," دقیقه گذشته است"," "]}),e.jsxs("p",{className:"text-center mt-3",children:["( ",a," )"]})]}),e.jsx("div",{className:"flex flex-col gap-y-6",children:r[0].details.obj.map(t=>e.jsx(b,{data:t},t.created_at))}),e.jsx("div",{className:"bg-gray-200 p-3 mx-3",children:e.jsxs("p",{className:"font-bold text-center",children:["قیمت کل پیتزا شما : $",o]})})]}):e.jsx("div",{className:"relative min-h-[300px]",children:e.jsx("div",{className:"flex  inset-0  justify-center items-center",children:e.jsx(f,{size:20,color:"#bfc1c5"})})})}function T(){const{transitionId:s}=u(),{data:r,isFetched:n}=h(s);return e.jsx(p,{children:e.jsxs("div",{className:"flex flex-col font-Vazirmatn gap-y-5 p-3 mt-9 md:w-3/4 md:mx-auto",children:[e.jsx(y,{transitionId:s}),e.jsx(g,{isFetched:n,data:r})]})})}export{T as default};
